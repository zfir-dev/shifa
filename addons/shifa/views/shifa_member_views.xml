<odoo>
  <!-- Tree -->
  <record id="view_shifa_member_tree" model="ir.ui.view">
    <field name="name">shifa.member.tree</field>
    <field name="model">shifa.member</field>
    <field name="arch" type="xml">
      <list>
        <field name="name"/>
        <field name="status"/>
        <field name="payment_state"/>
        <field name="category"/>
        <field name="dependent_count"/>
        <field name="total_fee"/>
      </list>
    </field>
  </record>

  <!-- Kanban -->
  <record id="view_shifa_member_kanban" model="ir.ui.view">
    <field name="name">shifa.member.kanban</field>
    <field name="model">shifa.member</field>
    <field name="arch" type="xml">
      <kanban>
        <field name="status"/>
        <templates>
          <t t-name="kanban-box">
            <div class="oe_kanban_global_click">
              <div><strong t-esc="record.name.value"/></div>
              <div><small>Status: <t t-esc="record.status.value"/></small></div>
            </div>
          </t>
        </templates>
      </kanban>
    </field>
  </record>

  <!-- Graph -->
  <record id="view_shifa_member_graph" model="ir.ui.view">
    <field name="name">shifa.member.graph</field>
    <field name="model">shifa.member</field>
    <field name="arch" type="xml">
      <graph string="Members by Status">
        <field name="status" type="row"/>
        <field name="id" type="measure"/>
      </graph>
    </field>
  </record>

  <!-- Pivot for subscription revenue -->
  <record id="view_shifa_member_pivot" model="ir.ui.view">
    <field name="name">shifa.member.pivot</field>
    <field name="model">shifa.member</field>
    <field name="arch" type="xml">
      <pivot>
        <field name="status" type="row"/>
        <field name="entry_fee" type="measure"/>
        <field name="annual_fee" type="measure"/>
      </pivot>
    </field>
  </record>

  <!-- Form -->
  <record id="view_shifa_member_form" model="ir.ui.view">
    <field name="name">shifa.member.form</field>
    <field name="model">shifa.member</field>
    <field name="arch" type="xml">
      <form string="Member">
        <header>
          <button name="action_approve" string="Approve &amp; Create Initial Invoice" type="object" class="btn-primary" invisible="status != 'draft'"/>
          <button name="create_annual_invoice" string="Create Annual Invoice" type="object" class="btn-secondary" invisible="status != 'active'"/>
          <field name="status" widget="statusbar" statusbar_visible="draft,active"/>
        </header>
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button name="action_view_invoices" type="object" class="oe_stat_button" icon="fa-file-text-o">
              <field name="invoice_count" widget="statinfo" string="Invoices"/>
            </button>
          </div>
          <group>
            <group>
              <field name="name"/>
              <field name="partner_id" readonly="1"/>
              <field name="national_id"/>
              <field name="date_of_birth"/>
              <field name="email"/>
              <field name="phone"/>
              <field name="address"/>
            </group>
            <group>
              <field name="status"/>
              <field name="payment_state"/>
              <field name="category"/>
              <field name="orphan_secondary"/>
              <field name="is_auto_promoted"/>
              <field name="notification_sent"/>
              <field name="linked_member_id"/>
              <field name="admission_date"/>
              <field name="membership_start_date"/>
            </group>
          </group>

          <notebook>
            <page string="Fees &amp; Payments">
              <group>
                <group string="Fee Structure">
                  <field name="entry_fee"/>
                  <field name="annual_fee"/>
                  <field name="dependent_fee"/>
                  <field name="donation_amount"/>
                  <field name="total_fee" readonly="1"/>
                </group>
                <group string="Member Status Actions">
                  <div class="o_row">
                    <button name="action_suspend" string="Suspend Member" type="object" class="btn btn-warning" style="width: 100%; margin-bottom: 8px;" invisible="status != 'active'"/>
                    <button name="action_terminate" string="Mark Off (Terminate)" type="object" class="btn btn-danger" style="width: 100%; margin-bottom: 8px;" invisible="status == 'terminated'"/>
                    <button name="action_mark_deceased" string="Mark Deceased" type="object" class="btn btn-danger" style="width: 100%;" invisible="status == 'deceased'"/>
                  </div>
                </group>
              </group>
              <separator string="Payment Processing Instructions"/>
              <div class="oe_grey">
                <p><strong>How to Record Payments:</strong></p>
                <p>• Click the <strong>"Invoices"</strong> smart button at the top</p>
                <p>• Open the invoice and click <strong>"Register Payment"</strong></p>
                <p>• Select journal: <strong>Bank</strong>, <strong>Cash</strong>, or <strong>Juice</strong></p>
                <p>• Enter payment reference (e.g., Juice #123456)</p>
                <p>• Payment State updates automatically</p>
              </div>
            </page>

            <page string="Dependents">
              <field name="dependent_ids">
                  <list editable="bottom">
                  <field name="name"/>
                  <field name="relation"/>
                  <field name="date_of_birth"/>
                  <field name="age_group" readonly="1"/>
                  <field name="is_care_dependent"/>
                  <field name="is_orphan"/>
                  <field name="subscription_state"/>
                  <field name="auto_promote"/>
                  </list>
                <form>
                  <group>
                    <field name="name"/>
                    <field name="relation"/>
                    <field name="date_of_birth"/>
                    <field name="is_care_dependent"/>
                    <field name="is_orphan"/>
                    <field name="subscription_state"/>
                    <field name="auto_promote"/>
                  </group>
                </form>
              </field>
            </page>
          </notebook>
        </sheet>
        <chatter/>
      </form>
    </field>
  </record>
</odoo>
